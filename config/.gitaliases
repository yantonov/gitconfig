[alias]
# list of aliases
aliases = "config --get-regexp alias"

# init git repository

# first commit can not be moved so you need to create empty commit as initial
it = "!git init && git commit -m 'root' --allow-empty"

# global user settings may diffes from settings for newly created repository, so ask basic settings explicitly
itc = "!git init && echo "Enter user name:" && read username && git config user.name "$username" && echo "Enter email:" && read email && git config user.email "$email" && git commit -m 'root' --allow-empty"

# init nested git repository
git = "!f() { cd "$GIT_PREFIX" && git init && git commit -m 'root' --allow-empty; }; f"

# remote
rmt = remote -v

# common
co = checkout
br = branch -vv
st = status --long
c = commit
cm = commit -m
cat = cat-file -p
ps = push
pl = pull
pr = pull --rebase
unstage = reset HEAD --
rc = rebase --continue
ra = rebase --abort
rs = rebase --skip
mc = merge --no-ff
cp = cherry-pick

# stash
staash = "stash --include-untracked"

# current branch
cb = "rev-parse --abbrev-ref HEAD"

# current commit hash
chash = "rev-parse HEAD"

# kill deleted remote branches
purge-branch = "fetch --prune"
clean-branches = "remote prune"

# LOG
# simple one line log
ls = log --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %C(bold blue)<%an>%Creset'
# changed files
ll = log --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %C(bold blue)<%an>%Creset' --decorate --numstat
# no colors
lnc = log --pretty=format:"%h\\ %s\\ [%cn]"
# commits with dates
ldt = log --all --pretty=format:'%Cred%h%Creset %Cgreen%ad%Creset -%C(yellow)%d%Creset %s %C(bold blue)<%an>%Creset'
# commits with short dates
lds = "!git ldt --date=short"
# commits with relative dates
ldr = "!git ldt --date=relative"
# commits with date and times
ldi = "!git ldt --date=iso"
# graph representation
lgraph = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%ci)%Creset %C(bold blue)<%an>%Creset'
# default look for short git log
ldef = log --oneline --decorate
# commits related to a file
filelog = log -u
fl = log -u
# last commit
lc = "!git ll -1"

# DIFF
# Show a diff last commit:
dlc = diff --cached HEAD^
diffc = diff --cached HEAD
dc = diff --cached HEAD
df = "!git diff --color HEAD | diff-so-fancy"
dfc = "!git diff --color --cached HEAD | diff-so-fancy"
# Show content (full diff) of a commit given a revision:
dr    = "!f() { if [ -z "$1" ]; then echo 'revision is not defined'; echo 'usage git dr <revision>'; else git diff "$1"^.."$1"; fi }; f"
diffr = "!f() { if [ -z "$1" ]; then echo 'revision is not defined'; echo 'usage git dr <revision>'; else git diff "$1"^.."$1"; fi }; f"

# GREP/SEARCH
# Search/grep your entire codebase for a string:
gr = grep -Ii
# Grep from root folder:
gra = "!f() { A=$(pwd) && TOPLEVEL=$(git rev-parse --show-toplevel) && cd $TOPLEVEL && git grep --full-name --color -In $1 && cd $A; }; f"
# Find a file path in codebase:
f = "!git ls-files | grep -i"

# FIX
# something like hg rollback
rollback = "reset --soft HEAD~"
# remove already committed trash
fuck = "reset --hard HEAD^"

# reset working directory
clear = "reset --hard"

# cleanup untracked files
purge = "clean -d -i"
show-purge = "clean -d -n"

# REPOSITORY ROOT
top = "!f() { TOPLEVEL=$(git rev-parse --show-toplevel) && echo $TOPLEVEL; }; f"
root = "!git top"

# force
please = "push --force-with-lease"

# TAGS
# show the last tag
lasttag = describe --tags --abbrev=0
lt      = describe --tags --abbrev=0
